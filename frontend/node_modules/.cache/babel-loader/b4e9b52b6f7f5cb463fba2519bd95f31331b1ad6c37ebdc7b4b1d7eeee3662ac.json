{"ast":null,"code":"/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __assign, __extends, __values } from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, numbers, strings } from './constants';\nimport { getNormalizedEventCoords } from './util';\n// Activation events registered on the root element of each instance for activation\nvar ACTIVATION_EVENT_TYPES = ['touchstart', 'pointerdown', 'mousedown', 'keydown'];\n// Deactivation events registered on documentElement when a pointer-related down event occurs\nvar POINTER_DEACTIVATION_EVENT_TYPES = ['touchend', 'pointerup', 'mouseup', 'contextmenu'];\n// simultaneous nested activations\nvar activatedTargets = [];\nvar MDCRippleFoundation = /** @class */function (_super) {\n  __extends(MDCRippleFoundation, _super);\n  function MDCRippleFoundation(adapter) {\n    var _this = _super.call(this, __assign(__assign({}, MDCRippleFoundation.defaultAdapter), adapter)) || this;\n    _this.activationAnimationHasEnded = false;\n    _this.activationTimer = 0;\n    _this.fgDeactivationRemovalTimer = 0;\n    _this.fgScale = '0';\n    _this.frame = {\n      width: 0,\n      height: 0\n    };\n    _this.initialSize = 0;\n    _this.layoutFrame = 0;\n    _this.maxRadius = 0;\n    _this.unboundedCoords = {\n      left: 0,\n      top: 0\n    };\n    _this.activationState = _this.defaultActivationState();\n    _this.activationTimerCallback = function () {\n      _this.activationAnimationHasEnded = true;\n      _this.runDeactivationUXLogicIfReady();\n    };\n    _this.activateHandler = function (e) {\n      _this.activateImpl(e);\n    };\n    _this.deactivateHandler = function () {\n      _this.deactivateImpl();\n    };\n    _this.focusHandler = function () {\n      _this.handleFocus();\n    };\n    _this.blurHandler = function () {\n      _this.handleBlur();\n    };\n    _this.resizeHandler = function () {\n      _this.layout();\n    };\n    return _this;\n  }\n  Object.defineProperty(MDCRippleFoundation, \"cssClasses\", {\n    get: function () {\n      return cssClasses;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MDCRippleFoundation, \"strings\", {\n    get: function () {\n      return strings;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MDCRippleFoundation, \"numbers\", {\n    get: function () {\n      return numbers;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MDCRippleFoundation, \"defaultAdapter\", {\n    get: function () {\n      return {\n        addClass: function () {\n          return undefined;\n        },\n        browserSupportsCssVars: function () {\n          return true;\n        },\n        computeBoundingRect: function () {\n          return {\n            top: 0,\n            right: 0,\n            bottom: 0,\n            left: 0,\n            width: 0,\n            height: 0\n          };\n        },\n        containsEventTarget: function () {\n          return true;\n        },\n        deregisterDocumentInteractionHandler: function () {\n          return undefined;\n        },\n        deregisterInteractionHandler: function () {\n          return undefined;\n        },\n        deregisterResizeHandler: function () {\n          return undefined;\n        },\n        getWindowPageOffset: function () {\n          return {\n            x: 0,\n            y: 0\n          };\n        },\n        isSurfaceActive: function () {\n          return true;\n        },\n        isSurfaceDisabled: function () {\n          return true;\n        },\n        isUnbounded: function () {\n          return true;\n        },\n        registerDocumentInteractionHandler: function () {\n          return undefined;\n        },\n        registerInteractionHandler: function () {\n          return undefined;\n        },\n        registerResizeHandler: function () {\n          return undefined;\n        },\n        removeClass: function () {\n          return undefined;\n        },\n        updateCssVariable: function () {\n          return undefined;\n        }\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  MDCRippleFoundation.prototype.init = function () {\n    var _this = this;\n    var supportsPressRipple = this.supportsPressRipple();\n    this.registerRootHandlers(supportsPressRipple);\n    if (supportsPressRipple) {\n      var _a = MDCRippleFoundation.cssClasses,\n        ROOT_1 = _a.ROOT,\n        UNBOUNDED_1 = _a.UNBOUNDED;\n      requestAnimationFrame(function () {\n        _this.adapter.addClass(ROOT_1);\n        if (_this.adapter.isUnbounded()) {\n          _this.adapter.addClass(UNBOUNDED_1);\n          // Unbounded ripples need layout logic applied immediately to set coordinates for both shade and ripple\n          _this.layoutInternal();\n        }\n      });\n    }\n  };\n  MDCRippleFoundation.prototype.destroy = function () {\n    var _this = this;\n    if (this.supportsPressRipple()) {\n      if (this.activationTimer) {\n        clearTimeout(this.activationTimer);\n        this.activationTimer = 0;\n        this.adapter.removeClass(MDCRippleFoundation.cssClasses.FG_ACTIVATION);\n      }\n      if (this.fgDeactivationRemovalTimer) {\n        clearTimeout(this.fgDeactivationRemovalTimer);\n        this.fgDeactivationRemovalTimer = 0;\n        this.adapter.removeClass(MDCRippleFoundation.cssClasses.FG_DEACTIVATION);\n      }\n      var _a = MDCRippleFoundation.cssClasses,\n        ROOT_2 = _a.ROOT,\n        UNBOUNDED_2 = _a.UNBOUNDED;\n      requestAnimationFrame(function () {\n        _this.adapter.removeClass(ROOT_2);\n        _this.adapter.removeClass(UNBOUNDED_2);\n        _this.removeCssVars();\n      });\n    }\n    this.deregisterRootHandlers();\n    this.deregisterDeactivationHandlers();\n  };\n  /**\n   * @param evt Optional event containing position information.\n   */\n  MDCRippleFoundation.prototype.activate = function (evt) {\n    this.activateImpl(evt);\n  };\n  MDCRippleFoundation.prototype.deactivate = function () {\n    this.deactivateImpl();\n  };\n  MDCRippleFoundation.prototype.layout = function () {\n    var _this = this;\n    if (this.layoutFrame) {\n      cancelAnimationFrame(this.layoutFrame);\n    }\n    this.layoutFrame = requestAnimationFrame(function () {\n      _this.layoutInternal();\n      _this.layoutFrame = 0;\n    });\n  };\n  MDCRippleFoundation.prototype.setUnbounded = function (unbounded) {\n    var UNBOUNDED = MDCRippleFoundation.cssClasses.UNBOUNDED;\n    if (unbounded) {\n      this.adapter.addClass(UNBOUNDED);\n    } else {\n      this.adapter.removeClass(UNBOUNDED);\n    }\n  };\n  MDCRippleFoundation.prototype.handleFocus = function () {\n    var _this = this;\n    requestAnimationFrame(function () {\n      return _this.adapter.addClass(MDCRippleFoundation.cssClasses.BG_FOCUSED);\n    });\n  };\n  MDCRippleFoundation.prototype.handleBlur = function () {\n    var _this = this;\n    requestAnimationFrame(function () {\n      return _this.adapter.removeClass(MDCRippleFoundation.cssClasses.BG_FOCUSED);\n    });\n  };\n  /**\n   * We compute this property so that we are not querying information about the client\n   * until the point in time where the foundation requests it. This prevents scenarios where\n   * client-side feature-detection may happen too early, such as when components are rendered on the server\n   * and then initialized at mount time on the client.\n   */\n  MDCRippleFoundation.prototype.supportsPressRipple = function () {\n    return this.adapter.browserSupportsCssVars();\n  };\n  MDCRippleFoundation.prototype.defaultActivationState = function () {\n    return {\n      activationEvent: undefined,\n      hasDeactivationUXRun: false,\n      isActivated: false,\n      isProgrammatic: false,\n      wasActivatedByPointer: false,\n      wasElementMadeActive: false\n    };\n  };\n  /**\n   * supportsPressRipple Passed from init to save a redundant function call\n   */\n  MDCRippleFoundation.prototype.registerRootHandlers = function (supportsPressRipple) {\n    var e_1, _a;\n    if (supportsPressRipple) {\n      try {\n        for (var ACTIVATION_EVENT_TYPES_1 = __values(ACTIVATION_EVENT_TYPES), ACTIVATION_EVENT_TYPES_1_1 = ACTIVATION_EVENT_TYPES_1.next(); !ACTIVATION_EVENT_TYPES_1_1.done; ACTIVATION_EVENT_TYPES_1_1 = ACTIVATION_EVENT_TYPES_1.next()) {\n          var evtType = ACTIVATION_EVENT_TYPES_1_1.value;\n          this.adapter.registerInteractionHandler(evtType, this.activateHandler);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (ACTIVATION_EVENT_TYPES_1_1 && !ACTIVATION_EVENT_TYPES_1_1.done && (_a = ACTIVATION_EVENT_TYPES_1.return)) _a.call(ACTIVATION_EVENT_TYPES_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n      if (this.adapter.isUnbounded()) {\n        this.adapter.registerResizeHandler(this.resizeHandler);\n      }\n    }\n    this.adapter.registerInteractionHandler('focus', this.focusHandler);\n    this.adapter.registerInteractionHandler('blur', this.blurHandler);\n  };\n  MDCRippleFoundation.prototype.registerDeactivationHandlers = function (evt) {\n    var e_2, _a;\n    if (evt.type === 'keydown') {\n      this.adapter.registerInteractionHandler('keyup', this.deactivateHandler);\n    } else {\n      try {\n        for (var POINTER_DEACTIVATION_EVENT_TYPES_1 = __values(POINTER_DEACTIVATION_EVENT_TYPES), POINTER_DEACTIVATION_EVENT_TYPES_1_1 = POINTER_DEACTIVATION_EVENT_TYPES_1.next(); !POINTER_DEACTIVATION_EVENT_TYPES_1_1.done; POINTER_DEACTIVATION_EVENT_TYPES_1_1 = POINTER_DEACTIVATION_EVENT_TYPES_1.next()) {\n          var evtType = POINTER_DEACTIVATION_EVENT_TYPES_1_1.value;\n          this.adapter.registerDocumentInteractionHandler(evtType, this.deactivateHandler);\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (POINTER_DEACTIVATION_EVENT_TYPES_1_1 && !POINTER_DEACTIVATION_EVENT_TYPES_1_1.done && (_a = POINTER_DEACTIVATION_EVENT_TYPES_1.return)) _a.call(POINTER_DEACTIVATION_EVENT_TYPES_1);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    }\n  };\n  MDCRippleFoundation.prototype.deregisterRootHandlers = function () {\n    var e_3, _a;\n    try {\n      for (var ACTIVATION_EVENT_TYPES_2 = __values(ACTIVATION_EVENT_TYPES), ACTIVATION_EVENT_TYPES_2_1 = ACTIVATION_EVENT_TYPES_2.next(); !ACTIVATION_EVENT_TYPES_2_1.done; ACTIVATION_EVENT_TYPES_2_1 = ACTIVATION_EVENT_TYPES_2.next()) {\n        var evtType = ACTIVATION_EVENT_TYPES_2_1.value;\n        this.adapter.deregisterInteractionHandler(evtType, this.activateHandler);\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (ACTIVATION_EVENT_TYPES_2_1 && !ACTIVATION_EVENT_TYPES_2_1.done && (_a = ACTIVATION_EVENT_TYPES_2.return)) _a.call(ACTIVATION_EVENT_TYPES_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n    this.adapter.deregisterInteractionHandler('focus', this.focusHandler);\n    this.adapter.deregisterInteractionHandler('blur', this.blurHandler);\n    if (this.adapter.isUnbounded()) {\n      this.adapter.deregisterResizeHandler(this.resizeHandler);\n    }\n  };\n  MDCRippleFoundation.prototype.deregisterDeactivationHandlers = function () {\n    var e_4, _a;\n    this.adapter.deregisterInteractionHandler('keyup', this.deactivateHandler);\n    try {\n      for (var POINTER_DEACTIVATION_EVENT_TYPES_2 = __values(POINTER_DEACTIVATION_EVENT_TYPES), POINTER_DEACTIVATION_EVENT_TYPES_2_1 = POINTER_DEACTIVATION_EVENT_TYPES_2.next(); !POINTER_DEACTIVATION_EVENT_TYPES_2_1.done; POINTER_DEACTIVATION_EVENT_TYPES_2_1 = POINTER_DEACTIVATION_EVENT_TYPES_2.next()) {\n        var evtType = POINTER_DEACTIVATION_EVENT_TYPES_2_1.value;\n        this.adapter.deregisterDocumentInteractionHandler(evtType, this.deactivateHandler);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (POINTER_DEACTIVATION_EVENT_TYPES_2_1 && !POINTER_DEACTIVATION_EVENT_TYPES_2_1.done && (_a = POINTER_DEACTIVATION_EVENT_TYPES_2.return)) _a.call(POINTER_DEACTIVATION_EVENT_TYPES_2);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n  };\n  MDCRippleFoundation.prototype.removeCssVars = function () {\n    var _this = this;\n    var rippleStrings = MDCRippleFoundation.strings;\n    var keys = Object.keys(rippleStrings);\n    keys.forEach(function (key) {\n      if (key.indexOf('VAR_') === 0) {\n        _this.adapter.updateCssVariable(rippleStrings[key], null);\n      }\n    });\n  };\n  MDCRippleFoundation.prototype.activateImpl = function (evt) {\n    var _this = this;\n    if (this.adapter.isSurfaceDisabled()) {\n      return;\n    }\n    var activationState = this.activationState;\n    if (activationState.isActivated) {\n      return;\n    }\n    // Avoid reacting to follow-on events fired by touch device after an already-processed user interaction\n    var previousActivationEvent = this.previousActivationEvent;\n    var isSameInteraction = previousActivationEvent && evt !== undefined && previousActivationEvent.type !== evt.type;\n    if (isSameInteraction) {\n      return;\n    }\n    activationState.isActivated = true;\n    activationState.isProgrammatic = evt === undefined;\n    activationState.activationEvent = evt;\n    activationState.wasActivatedByPointer = activationState.isProgrammatic ? false : evt !== undefined && (evt.type === 'mousedown' || evt.type === 'touchstart' || evt.type === 'pointerdown');\n    var hasActivatedChild = evt !== undefined && activatedTargets.length > 0 && activatedTargets.some(function (target) {\n      return _this.adapter.containsEventTarget(target);\n    });\n    if (hasActivatedChild) {\n      // Immediately reset activation state, while preserving logic that prevents touch follow-on events\n      this.resetActivationState();\n      return;\n    }\n    if (evt !== undefined) {\n      activatedTargets.push(evt.target);\n      this.registerDeactivationHandlers(evt);\n    }\n    activationState.wasElementMadeActive = this.checkElementMadeActive(evt);\n    if (activationState.wasElementMadeActive) {\n      this.animateActivation();\n    }\n    requestAnimationFrame(function () {\n      // Reset array on next frame after the current event has had a chance to bubble to prevent ancestor ripples\n      activatedTargets = [];\n      if (!activationState.wasElementMadeActive && evt !== undefined && (evt.key === ' ' || evt.keyCode === 32)) {\n        // If space was pressed, try again within an rAF call to detect :active, because different UAs report\n        // active states inconsistently when they're called within event handling code:\n        // - https://bugs.chromium.org/p/chromium/issues/detail?id=635971\n        // - https://bugzilla.mozilla.org/show_bug.cgi?id=1293741\n        // We try first outside rAF to support Edge, which does not exhibit this problem, but will crash if a CSS\n        // variable is set within a rAF callback for a submit button interaction (#2241).\n        activationState.wasElementMadeActive = _this.checkElementMadeActive(evt);\n        if (activationState.wasElementMadeActive) {\n          _this.animateActivation();\n        }\n      }\n      if (!activationState.wasElementMadeActive) {\n        // Reset activation state immediately if element was not made active.\n        _this.activationState = _this.defaultActivationState();\n      }\n    });\n  };\n  MDCRippleFoundation.prototype.checkElementMadeActive = function (evt) {\n    return evt !== undefined && evt.type === 'keydown' ? this.adapter.isSurfaceActive() : true;\n  };\n  MDCRippleFoundation.prototype.animateActivation = function () {\n    var _this = this;\n    var _a = MDCRippleFoundation.strings,\n      VAR_FG_TRANSLATE_START = _a.VAR_FG_TRANSLATE_START,\n      VAR_FG_TRANSLATE_END = _a.VAR_FG_TRANSLATE_END;\n    var _b = MDCRippleFoundation.cssClasses,\n      FG_DEACTIVATION = _b.FG_DEACTIVATION,\n      FG_ACTIVATION = _b.FG_ACTIVATION;\n    var DEACTIVATION_TIMEOUT_MS = MDCRippleFoundation.numbers.DEACTIVATION_TIMEOUT_MS;\n    this.layoutInternal();\n    var translateStart = '';\n    var translateEnd = '';\n    if (!this.adapter.isUnbounded()) {\n      var _c = this.getFgTranslationCoordinates(),\n        startPoint = _c.startPoint,\n        endPoint = _c.endPoint;\n      translateStart = startPoint.x + \"px, \" + startPoint.y + \"px\";\n      translateEnd = endPoint.x + \"px, \" + endPoint.y + \"px\";\n    }\n    this.adapter.updateCssVariable(VAR_FG_TRANSLATE_START, translateStart);\n    this.adapter.updateCssVariable(VAR_FG_TRANSLATE_END, translateEnd);\n    // Cancel any ongoing activation/deactivation animations\n    clearTimeout(this.activationTimer);\n    clearTimeout(this.fgDeactivationRemovalTimer);\n    this.rmBoundedActivationClasses();\n    this.adapter.removeClass(FG_DEACTIVATION);\n    // Force layout in order to re-trigger the animation.\n    this.adapter.computeBoundingRect();\n    this.adapter.addClass(FG_ACTIVATION);\n    this.activationTimer = setTimeout(function () {\n      _this.activationTimerCallback();\n    }, DEACTIVATION_TIMEOUT_MS);\n  };\n  MDCRippleFoundation.prototype.getFgTranslationCoordinates = function () {\n    var _a = this.activationState,\n      activationEvent = _a.activationEvent,\n      wasActivatedByPointer = _a.wasActivatedByPointer;\n    var startPoint;\n    if (wasActivatedByPointer) {\n      startPoint = getNormalizedEventCoords(activationEvent, this.adapter.getWindowPageOffset(), this.adapter.computeBoundingRect());\n    } else {\n      startPoint = {\n        x: this.frame.width / 2,\n        y: this.frame.height / 2\n      };\n    }\n    // Center the element around the start point.\n    startPoint = {\n      x: startPoint.x - this.initialSize / 2,\n      y: startPoint.y - this.initialSize / 2\n    };\n    var endPoint = {\n      x: this.frame.width / 2 - this.initialSize / 2,\n      y: this.frame.height / 2 - this.initialSize / 2\n    };\n    return {\n      startPoint: startPoint,\n      endPoint: endPoint\n    };\n  };\n  MDCRippleFoundation.prototype.runDeactivationUXLogicIfReady = function () {\n    var _this = this;\n    // This method is called both when a pointing device is released, and when the activation animation ends.\n    // The deactivation animation should only run after both of those occur.\n    var FG_DEACTIVATION = MDCRippleFoundation.cssClasses.FG_DEACTIVATION;\n    var _a = this.activationState,\n      hasDeactivationUXRun = _a.hasDeactivationUXRun,\n      isActivated = _a.isActivated;\n    var activationHasEnded = hasDeactivationUXRun || !isActivated;\n    if (activationHasEnded && this.activationAnimationHasEnded) {\n      this.rmBoundedActivationClasses();\n      this.adapter.addClass(FG_DEACTIVATION);\n      this.fgDeactivationRemovalTimer = setTimeout(function () {\n        _this.adapter.removeClass(FG_DEACTIVATION);\n      }, numbers.FG_DEACTIVATION_MS);\n    }\n  };\n  MDCRippleFoundation.prototype.rmBoundedActivationClasses = function () {\n    var FG_ACTIVATION = MDCRippleFoundation.cssClasses.FG_ACTIVATION;\n    this.adapter.removeClass(FG_ACTIVATION);\n    this.activationAnimationHasEnded = false;\n    this.adapter.computeBoundingRect();\n  };\n  MDCRippleFoundation.prototype.resetActivationState = function () {\n    var _this = this;\n    this.previousActivationEvent = this.activationState.activationEvent;\n    this.activationState = this.defaultActivationState();\n    // Touch devices may fire additional events for the same interaction within a short time.\n    // Store the previous event until it's safe to assume that subsequent events are for new interactions.\n    setTimeout(function () {\n      return _this.previousActivationEvent = undefined;\n    }, MDCRippleFoundation.numbers.TAP_DELAY_MS);\n  };\n  MDCRippleFoundation.prototype.deactivateImpl = function () {\n    var _this = this;\n    var activationState = this.activationState;\n    // This can happen in scenarios such as when you have a keyup event that blurs the element.\n    if (!activationState.isActivated) {\n      return;\n    }\n    var state = __assign({}, activationState);\n    if (activationState.isProgrammatic) {\n      requestAnimationFrame(function () {\n        _this.animateDeactivation(state);\n      });\n      this.resetActivationState();\n    } else {\n      this.deregisterDeactivationHandlers();\n      requestAnimationFrame(function () {\n        _this.activationState.hasDeactivationUXRun = true;\n        _this.animateDeactivation(state);\n        _this.resetActivationState();\n      });\n    }\n  };\n  MDCRippleFoundation.prototype.animateDeactivation = function (_a) {\n    var wasActivatedByPointer = _a.wasActivatedByPointer,\n      wasElementMadeActive = _a.wasElementMadeActive;\n    if (wasActivatedByPointer || wasElementMadeActive) {\n      this.runDeactivationUXLogicIfReady();\n    }\n  };\n  MDCRippleFoundation.prototype.layoutInternal = function () {\n    var _this = this;\n    this.frame = this.adapter.computeBoundingRect();\n    var maxDim = Math.max(this.frame.height, this.frame.width);\n    // Surface diameter is treated differently for unbounded vs. bounded ripples.\n    // Unbounded ripple diameter is calculated smaller since the surface is expected to already be padded appropriately\n    // to extend the hitbox, and the ripple is expected to meet the edges of the padded hitbox (which is typically\n    // square). Bounded ripples, on the other hand, are fully expected to expand beyond the surface's longest diameter\n    // (calculated based on the diagonal plus a constant padding), and are clipped at the surface's border via\n    // `overflow: hidden`.\n    var getBoundedRadius = function () {\n      var hypotenuse = Math.sqrt(Math.pow(_this.frame.width, 2) + Math.pow(_this.frame.height, 2));\n      return hypotenuse + MDCRippleFoundation.numbers.PADDING;\n    };\n    this.maxRadius = this.adapter.isUnbounded() ? maxDim : getBoundedRadius();\n    // Ripple is sized as a fraction of the largest dimension of the surface, then scales up using a CSS scale transform\n    var initialSize = Math.floor(maxDim * MDCRippleFoundation.numbers.INITIAL_ORIGIN_SCALE);\n    // Unbounded ripple size should always be even number to equally center align.\n    if (this.adapter.isUnbounded() && initialSize % 2 !== 0) {\n      this.initialSize = initialSize - 1;\n    } else {\n      this.initialSize = initialSize;\n    }\n    this.fgScale = \"\" + this.maxRadius / this.initialSize;\n    this.updateLayoutCssVars();\n  };\n  MDCRippleFoundation.prototype.updateLayoutCssVars = function () {\n    var _a = MDCRippleFoundation.strings,\n      VAR_FG_SIZE = _a.VAR_FG_SIZE,\n      VAR_LEFT = _a.VAR_LEFT,\n      VAR_TOP = _a.VAR_TOP,\n      VAR_FG_SCALE = _a.VAR_FG_SCALE;\n    this.adapter.updateCssVariable(VAR_FG_SIZE, this.initialSize + \"px\");\n    this.adapter.updateCssVariable(VAR_FG_SCALE, this.fgScale);\n    if (this.adapter.isUnbounded()) {\n      this.unboundedCoords = {\n        left: Math.round(this.frame.width / 2 - this.initialSize / 2),\n        top: Math.round(this.frame.height / 2 - this.initialSize / 2)\n      };\n      this.adapter.updateCssVariable(VAR_LEFT, this.unboundedCoords.left + \"px\");\n      this.adapter.updateCssVariable(VAR_TOP, this.unboundedCoords.top + \"px\");\n    }\n  };\n  return MDCRippleFoundation;\n}(MDCFoundation);\nexport { MDCRippleFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCRippleFoundation;","map":{"version":3,"names":["MDCFoundation","cssClasses","numbers","strings","getNormalizedEventCoords","ACTIVATION_EVENT_TYPES","POINTER_DEACTIVATION_EVENT_TYPES","activatedTargets","MDCRippleFoundation","_super","__extends","adapter","_this","call","__assign","defaultAdapter","activationAnimationHasEnded","activationTimer","fgDeactivationRemovalTimer","fgScale","frame","width","height","initialSize","layoutFrame","maxRadius","unboundedCoords","left","top","activationState","defaultActivationState","activationTimerCallback","runDeactivationUXLogicIfReady","activateHandler","e","activateImpl","deactivateHandler","deactivateImpl","focusHandler","handleFocus","blurHandler","handleBlur","resizeHandler","layout","Object","defineProperty","get","addClass","undefined","browserSupportsCssVars","computeBoundingRect","right","bottom","containsEventTarget","deregisterDocumentInteractionHandler","deregisterInteractionHandler","deregisterResizeHandler","getWindowPageOffset","x","y","isSurfaceActive","isSurfaceDisabled","isUnbounded","registerDocumentInteractionHandler","registerInteractionHandler","registerResizeHandler","removeClass","updateCssVariable","prototype","init","supportsPressRipple","registerRootHandlers","_a","ROOT_1","ROOT","UNBOUNDED_1","UNBOUNDED","requestAnimationFrame","layoutInternal","destroy","clearTimeout","FG_ACTIVATION","FG_DEACTIVATION","ROOT_2","UNBOUNDED_2","removeCssVars","deregisterRootHandlers","deregisterDeactivationHandlers","activate","evt","deactivate","cancelAnimationFrame","setUnbounded","unbounded","BG_FOCUSED","activationEvent","hasDeactivationUXRun","isActivated","isProgrammatic","wasActivatedByPointer","wasElementMadeActive","ACTIVATION_EVENT_TYPES_1","__values","ACTIVATION_EVENT_TYPES_1_1","next","done","evtType","value","registerDeactivationHandlers","type","POINTER_DEACTIVATION_EVENT_TYPES_1","POINTER_DEACTIVATION_EVENT_TYPES_1_1","ACTIVATION_EVENT_TYPES_2","ACTIVATION_EVENT_TYPES_2_1","POINTER_DEACTIVATION_EVENT_TYPES_2","POINTER_DEACTIVATION_EVENT_TYPES_2_1","rippleStrings","keys","forEach","key","indexOf","previousActivationEvent","isSameInteraction","hasActivatedChild","length","some","target","resetActivationState","push","checkElementMadeActive","animateActivation","keyCode","VAR_FG_TRANSLATE_START","VAR_FG_TRANSLATE_END","_b","DEACTIVATION_TIMEOUT_MS","translateStart","translateEnd","_c","getFgTranslationCoordinates","startPoint","endPoint","rmBoundedActivationClasses","setTimeout","activationHasEnded","FG_DEACTIVATION_MS","TAP_DELAY_MS","state","animateDeactivation","maxDim","Math","max","getBoundedRadius","hypotenuse","sqrt","pow","PADDING","floor","INITIAL_ORIGIN_SCALE","updateLayoutCssVars","VAR_FG_SIZE","VAR_LEFT","VAR_TOP","VAR_FG_SCALE","round"],"sources":["foundation.ts"],"sourcesContent":[null],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;AAuBA,SAAQA,aAAa,QAAO,2BAA2B;AAEvD,SAAQC,UAAU,EAAEC,OAAO,EAAEC,OAAO,QAAO,aAAa;AAExD,SAAQC,wBAAwB,QAAO,QAAQ;AA4B/C;AACA,IAAMC,sBAAsB,GAA0B,CACpD,YAAY,EAAE,aAAa,EAAE,WAAW,EAAE,SAAS,CACpD;AAED;AACA,IAAMC,gCAAgC,GAA4B,CAChE,UAAU,EAAE,WAAW,EAAE,SAAS,EAAE,aAAa,CAClD;AAED;AACA,IAAIC,gBAAgB,GAA8B,EAAE;AAEpD,IAAAC,mBAAA,0BAAAC,MAAA;EAAyCC,SAAA,CAAAF,mBAAA,EAAAC,MAAA;EAuDvC,SAAAD,oBAAYG,OAAmC;IAA/C,IAAAC,KAAA,GACEH,MAAA,CAAAI,IAAA,OAAAC,QAAA,CAAAA,QAAA,KAAUN,mBAAmB,CAACO,cAAc,GAAKJ,OAAO,EAAE;IArBpDC,KAAA,CAAAI,2BAA2B,GAAG,KAAK;IAEnCJ,KAAA,CAAAK,eAAe,GAAG,CAAC;IACnBL,KAAA,CAAAM,0BAA0B,GAAG,CAAC;IAC9BN,KAAA,CAAAO,OAAO,GAAG,GAAG;IACbP,KAAA,CAAAQ,KAAK,GAAG;MAACC,KAAK,EAAE,CAAC;MAAEC,MAAM,EAAE;IAAC,CAAC;IAC7BV,KAAA,CAAAW,WAAW,GAAG,CAAC;IACfX,KAAA,CAAAY,WAAW,GAAG,CAAC;IACfZ,KAAA,CAAAa,SAAS,GAAG,CAAC;IACbb,KAAA,CAAAc,eAAe,GAAgB;MAACC,IAAI,EAAE,CAAC;MAAEC,GAAG,EAAE;IAAC,CAAC;IActDhB,KAAI,CAACiB,eAAe,GAAGjB,KAAI,CAACkB,sBAAsB,EAAE;IAEpDlB,KAAI,CAACmB,uBAAuB,GAAG;MAC7BnB,KAAI,CAACI,2BAA2B,GAAG,IAAI;MACvCJ,KAAI,CAACoB,6BAA6B,EAAE;IACtC,CAAC;IACDpB,KAAI,CAACqB,eAAe,GAAG,UAACC,CAAC;MACvBtB,KAAI,CAACuB,YAAY,CAACD,CAAC,CAAC;IACtB,CAAC;IACDtB,KAAI,CAACwB,iBAAiB,GAAG;MACvBxB,KAAI,CAACyB,cAAc,EAAE;IACvB,CAAC;IACDzB,KAAI,CAAC0B,YAAY,GAAG;MAClB1B,KAAI,CAAC2B,WAAW,EAAE;IACpB,CAAC;IACD3B,KAAI,CAAC4B,WAAW,GAAG;MACjB5B,KAAI,CAAC6B,UAAU,EAAE;IACnB,CAAC;IACD7B,KAAI,CAAC8B,aAAa,GAAG;MACnB9B,KAAI,CAAC+B,MAAM,EAAE;IACf,CAAC;;EACH;EA9EAC,MAAA,CAAAC,cAAA,CAAoBrC,mBAAA,cAAU;SAA9B,SAAAsC,CAAA;MACE,OAAO7C,UAAU;IACnB,CAAC;;;;EAED2C,MAAA,CAAAC,cAAA,CAAoBrC,mBAAA,WAAO;SAA3B,SAAAsC,CAAA;MACE,OAAO3C,OAAO;IAChB,CAAC;;;;EAEDyC,MAAA,CAAAC,cAAA,CAAoBrC,mBAAA,WAAO;SAA3B,SAAAsC,CAAA;MACE,OAAO5C,OAAO;IAChB,CAAC;;;;EAED0C,MAAA,CAAAC,cAAA,CAAoBrC,mBAAA,kBAAc;SAAlC,SAAAsC,CAAA;MACE,OAAO;QACLC,QAAQ,EAAE,SAAAA,CAAA;UAAM,OAAAC,SAAS;QAAT,CAAS;QACzBC,sBAAsB,EAAE,SAAAA,CAAA;UAAM,WAAI;QAAJ,CAAI;QAClCC,mBAAmB,EAAE,SAAAA,CAAA;UACjB,OAAC;YAACtB,GAAG,EAAE,CAAC;YAAEuB,KAAK,EAAE,CAAC;YAAEC,MAAM,EAAE,CAAC;YAAEzB,IAAI,EAAE,CAAC;YAAEN,KAAK,EAAE,CAAC;YAAEC,MAAM,EAAE;UAAC,CAAS;QAApE,CAAoE;QACxE+B,mBAAmB,EAAE,SAAAA,CAAA;UAAM,WAAI;QAAJ,CAAI;QAC/BC,oCAAoC,EAAE,SAAAA,CAAA;UAAM,OAAAN,SAAS;QAAT,CAAS;QACrDO,4BAA4B,EAAE,SAAAA,CAAA;UAAM,OAAAP,SAAS;QAAT,CAAS;QAC7CQ,uBAAuB,EAAE,SAAAA,CAAA;UAAM,OAAAR,SAAS;QAAT,CAAS;QACxCS,mBAAmB,EAAE,SAAAA,CAAA;UAAM,OAAC;YAACC,CAAC,EAAE,CAAC;YAAEC,CAAC,EAAE;UAAC,CAAC;QAAb,CAAc;QACzCC,eAAe,EAAE,SAAAA,CAAA;UAAM,WAAI;QAAJ,CAAI;QAC3BC,iBAAiB,EAAE,SAAAA,CAAA;UAAM,WAAI;QAAJ,CAAI;QAC7BC,WAAW,EAAE,SAAAA,CAAA;UAAM,WAAI;QAAJ,CAAI;QACvBC,kCAAkC,EAAE,SAAAA,CAAA;UAAM,OAAAf,SAAS;QAAT,CAAS;QACnDgB,0BAA0B,EAAE,SAAAA,CAAA;UAAM,OAAAhB,SAAS;QAAT,CAAS;QAC3CiB,qBAAqB,EAAE,SAAAA,CAAA;UAAM,OAAAjB,SAAS;QAAT,CAAS;QACtCkB,WAAW,EAAE,SAAAA,CAAA;UAAM,OAAAlB,SAAS;QAAT,CAAS;QAC5BmB,iBAAiB,EAAE,SAAAA,CAAA;UAAM,OAAAnB,SAAS;QAAT;OAC1B;IACH,CAAC;;;;EAgDQxC,mBAAA,CAAA4D,SAAA,CAAAC,IAAI,GAAb;IAAA,IAAAzD,KAAA;IACE,IAAM0D,mBAAmB,GAAG,IAAI,CAACA,mBAAmB,EAAE;IAEtD,IAAI,CAACC,oBAAoB,CAACD,mBAAmB,CAAC;IAE9C,IAAIA,mBAAmB,EAAE;MACjB,IAAAE,EAAA,GAAoBhE,mBAAmB,CAACP,UAAU;QAAjDwE,MAAI,GAAAD,EAAA,CAAAE,IAAA;QAAEC,WAAS,GAAAH,EAAA,CAAAI,SAAkC;MACxDC,qBAAqB,CAAC;QACpBjE,KAAI,CAACD,OAAO,CAACoC,QAAQ,CAAC0B,MAAI,CAAC;QAC3B,IAAI7D,KAAI,CAACD,OAAO,CAACmD,WAAW,EAAE,EAAE;UAC9BlD,KAAI,CAACD,OAAO,CAACoC,QAAQ,CAAC4B,WAAS,CAAC;UAChC;UACA/D,KAAI,CAACkE,cAAc,EAAE;;MAEzB,CAAC,CAAC;;EAEN,CAAC;EAEQtE,mBAAA,CAAA4D,SAAA,CAAAW,OAAO,GAAhB;IAAA,IAAAnE,KAAA;IACE,IAAI,IAAI,CAAC0D,mBAAmB,EAAE,EAAE;MAC9B,IAAI,IAAI,CAACrD,eAAe,EAAE;QACxB+D,YAAY,CAAC,IAAI,CAAC/D,eAAe,CAAC;QAClC,IAAI,CAACA,eAAe,GAAG,CAAC;QACxB,IAAI,CAACN,OAAO,CAACuD,WAAW,CAAC1D,mBAAmB,CAACP,UAAU,CAACgF,aAAa,CAAC;;MAGxE,IAAI,IAAI,CAAC/D,0BAA0B,EAAE;QACnC8D,YAAY,CAAC,IAAI,CAAC9D,0BAA0B,CAAC;QAC7C,IAAI,CAACA,0BAA0B,GAAG,CAAC;QACnC,IAAI,CAACP,OAAO,CAACuD,WAAW,CACpB1D,mBAAmB,CAACP,UAAU,CAACiF,eAAe,CAAC;;MAG/C,IAAAV,EAAA,GAAoBhE,mBAAmB,CAACP,UAAU;QAAjDkF,MAAI,GAAAX,EAAA,CAAAE,IAAA;QAAEU,WAAS,GAAAZ,EAAA,CAAAI,SAAkC;MACxDC,qBAAqB,CAAC;QACpBjE,KAAI,CAACD,OAAO,CAACuD,WAAW,CAACiB,MAAI,CAAC;QAC9BvE,KAAI,CAACD,OAAO,CAACuD,WAAW,CAACkB,WAAS,CAAC;QACnCxE,KAAI,CAACyE,aAAa,EAAE;MACtB,CAAC,CAAC;;IAGJ,IAAI,CAACC,sBAAsB,EAAE;IAC7B,IAAI,CAACC,8BAA8B,EAAE;EACvC,CAAC;EAED;;;EAGA/E,mBAAA,CAAA4D,SAAA,CAAAoB,QAAQ,GAAR,UAASC,GAAW;IAClB,IAAI,CAACtD,YAAY,CAACsD,GAAG,CAAC;EACxB,CAAC;EAEDjF,mBAAA,CAAA4D,SAAA,CAAAsB,UAAU,GAAV;IACE,IAAI,CAACrD,cAAc,EAAE;EACvB,CAAC;EAED7B,mBAAA,CAAA4D,SAAA,CAAAzB,MAAM,GAAN;IAAA,IAAA/B,KAAA;IACE,IAAI,IAAI,CAACY,WAAW,EAAE;MACpBmE,oBAAoB,CAAC,IAAI,CAACnE,WAAW,CAAC;;IAExC,IAAI,CAACA,WAAW,GAAGqD,qBAAqB,CAAC;MACvCjE,KAAI,CAACkE,cAAc,EAAE;MACrBlE,KAAI,CAACY,WAAW,GAAG,CAAC;IACtB,CAAC,CAAC;EACJ,CAAC;EAEDhB,mBAAA,CAAA4D,SAAA,CAAAwB,YAAY,GAAZ,UAAaC,SAAkB;IACtB,IAAAjB,SAAS,GAAIpE,mBAAmB,CAACP,UAAU,CAAA2E,SAAlC;IAChB,IAAIiB,SAAS,EAAE;MACb,IAAI,CAAClF,OAAO,CAACoC,QAAQ,CAAC6B,SAAS,CAAC;KACjC,MAAM;MACL,IAAI,CAACjE,OAAO,CAACuD,WAAW,CAACU,SAAS,CAAC;;EAEvC,CAAC;EAEDpE,mBAAA,CAAA4D,SAAA,CAAA7B,WAAW,GAAX;IAAA,IAAA3B,KAAA;IACEiE,qBAAqB,CACjB;MAAM,OAAAjE,KAAI,CAACD,OAAO,CAACoC,QAAQ,CAACvC,mBAAmB,CAACP,UAAU,CAAC6F,UAAU,CAAC;IAAhE,CAAgE,CAAC;EAC7E,CAAC;EAEDtF,mBAAA,CAAA4D,SAAA,CAAA3B,UAAU,GAAV;IAAA,IAAA7B,KAAA;IACEiE,qBAAqB,CACjB;MAAM,OAAAjE,KAAI,CAACD,OAAO,CAACuD,WAAW,CAC1B1D,mBAAmB,CAACP,UAAU,CAAC6F,UAAU,CAAC;IADxC,CACwC,CAAC;EACrD,CAAC;EAED;;;;;;EAMQtF,mBAAA,CAAA4D,SAAA,CAAAE,mBAAmB,GAA3B;IACE,OAAO,IAAI,CAAC3D,OAAO,CAACsC,sBAAsB,EAAE;EAC9C,CAAC;EAEOzC,mBAAA,CAAA4D,SAAA,CAAAtC,sBAAsB,GAA9B;IACE,OAAO;MACLiE,eAAe,EAAE/C,SAAS;MAC1BgD,oBAAoB,EAAE,KAAK;MAC3BC,WAAW,EAAE,KAAK;MAClBC,cAAc,EAAE,KAAK;MACrBC,qBAAqB,EAAE,KAAK;MAC5BC,oBAAoB,EAAE;KACvB;EACH,CAAC;EAED;;;EAGQ5F,mBAAA,CAAA4D,SAAA,CAAAG,oBAAoB,GAA5B,UAA6BD,mBAA4B;;IACvD,IAAIA,mBAAmB,EAAE;;QACvB,KAAsB,IAAA+B,wBAAA,GAAAC,QAAA,CAAAjG,sBAAsB,GAAAkG,0BAAA,GAAAF,wBAAA,CAAAG,IAAA,KAAAD,0BAAA,CAAAE,IAAA,EAAAF,0BAAA,GAAAF,wBAAA,CAAAG,IAAA,IAAE;UAAzC,IAAME,OAAO,GAAAH,0BAAA,CAAAI,KAAA;UAChB,IAAI,CAAChG,OAAO,CAACqD,0BAA0B,CAAC0C,OAAO,EAAE,IAAI,CAACzE,eAAe,CAAC;;;;;;;;;;;;;MAExE,IAAI,IAAI,CAACtB,OAAO,CAACmD,WAAW,EAAE,EAAE;QAC9B,IAAI,CAACnD,OAAO,CAACsD,qBAAqB,CAAC,IAAI,CAACvB,aAAa,CAAC;;;IAI1D,IAAI,CAAC/B,OAAO,CAACqD,0BAA0B,CAAC,OAAO,EAAE,IAAI,CAAC1B,YAAY,CAAC;IACnE,IAAI,CAAC3B,OAAO,CAACqD,0BAA0B,CAAC,MAAM,EAAE,IAAI,CAACxB,WAAW,CAAC;EACnE,CAAC;EAEOhC,mBAAA,CAAA4D,SAAA,CAAAwC,4BAA4B,GAApC,UAAqCnB,GAAU;;IAC7C,IAAIA,GAAG,CAACoB,IAAI,KAAK,SAAS,EAAE;MAC1B,IAAI,CAAClG,OAAO,CAACqD,0BAA0B,CAAC,OAAO,EAAE,IAAI,CAAC5B,iBAAiB,CAAC;KACzE,MAAM;;QACL,KAAsB,IAAA0E,kCAAA,GAAAR,QAAA,CAAAhG,gCAAgC,GAAAyG,oCAAA,GAAAD,kCAAA,CAAAN,IAAA,KAAAO,oCAAA,CAAAN,IAAA,EAAAM,oCAAA,GAAAD,kCAAA,CAAAN,IAAA,IAAE;UAAnD,IAAME,OAAO,GAAAK,oCAAA,CAAAJ,KAAA;UAChB,IAAI,CAAChG,OAAO,CAACoD,kCAAkC,CAC3C2C,OAAO,EAAE,IAAI,CAACtE,iBAAiB,CAAC;;;;;;;;;;;;;;EAG1C,CAAC;EAEO5B,mBAAA,CAAA4D,SAAA,CAAAkB,sBAAsB,GAA9B;;;MACE,KAAsB,IAAA0B,wBAAA,GAAAV,QAAA,CAAAjG,sBAAsB,GAAA4G,0BAAA,GAAAD,wBAAA,CAAAR,IAAA,KAAAS,0BAAA,CAAAR,IAAA,EAAAQ,0BAAA,GAAAD,wBAAA,CAAAR,IAAA,IAAE;QAAzC,IAAME,OAAO,GAAAO,0BAAA,CAAAN,KAAA;QAChB,IAAI,CAAChG,OAAO,CAAC4C,4BAA4B,CAACmD,OAAO,EAAE,IAAI,CAACzE,eAAe,CAAC;;;;;;;;;;;;;IAE1E,IAAI,CAACtB,OAAO,CAAC4C,4BAA4B,CAAC,OAAO,EAAE,IAAI,CAACjB,YAAY,CAAC;IACrE,IAAI,CAAC3B,OAAO,CAAC4C,4BAA4B,CAAC,MAAM,EAAE,IAAI,CAACf,WAAW,CAAC;IAEnE,IAAI,IAAI,CAAC7B,OAAO,CAACmD,WAAW,EAAE,EAAE;MAC9B,IAAI,CAACnD,OAAO,CAAC6C,uBAAuB,CAAC,IAAI,CAACd,aAAa,CAAC;;EAE5D,CAAC;EAEOlC,mBAAA,CAAA4D,SAAA,CAAAmB,8BAA8B,GAAtC;;IACE,IAAI,CAAC5E,OAAO,CAAC4C,4BAA4B,CAAC,OAAO,EAAE,IAAI,CAACnB,iBAAiB,CAAC;;MAC1E,KAAsB,IAAA8E,kCAAA,GAAAZ,QAAA,CAAAhG,gCAAgC,GAAA6G,oCAAA,GAAAD,kCAAA,CAAAV,IAAA,KAAAW,oCAAA,CAAAV,IAAA,EAAAU,oCAAA,GAAAD,kCAAA,CAAAV,IAAA,IAAE;QAAnD,IAAME,OAAO,GAAAS,oCAAA,CAAAR,KAAA;QAChB,IAAI,CAAChG,OAAO,CAAC2C,oCAAoC,CAC7CoD,OAAO,EAAE,IAAI,CAACtE,iBAAiB,CAAC;;;;;;;;;;;;;EAExC,CAAC;EAEO5B,mBAAA,CAAA4D,SAAA,CAAAiB,aAAa,GAArB;IAAA,IAAAzE,KAAA;IACE,IAAMwG,aAAa,GAAG5G,mBAAmB,CAACL,OAAO;IACjD,IAAMkH,IAAI,GAAGzE,MAAM,CAACyE,IAAI,CAACD,aAAa,CAAsC;IAC5EC,IAAI,CAACC,OAAO,CAAC,UAACC,GAAG;MACf,IAAIA,GAAG,CAACC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;QAC7B5G,KAAI,CAACD,OAAO,CAACwD,iBAAiB,CAACiD,aAAa,CAACG,GAAG,CAAC,EAAE,IAAI,CAAC;;IAE5D,CAAC,CAAC;EACJ,CAAC;EAEO/G,mBAAA,CAAA4D,SAAA,CAAAjC,YAAY,GAApB,UAAqBsD,GAAW;IAAhC,IAAA7E,KAAA;IACE,IAAI,IAAI,CAACD,OAAO,CAACkD,iBAAiB,EAAE,EAAE;MACpC;;IAGF,IAAMhC,eAAe,GAAG,IAAI,CAACA,eAAe;IAC5C,IAAIA,eAAe,CAACoE,WAAW,EAAE;MAC/B;;IAGF;IACA,IAAMwB,uBAAuB,GAAG,IAAI,CAACA,uBAAuB;IAC5D,IAAMC,iBAAiB,GAAGD,uBAAuB,IAAIhC,GAAG,KAAKzC,SAAS,IAAIyE,uBAAuB,CAACZ,IAAI,KAAKpB,GAAG,CAACoB,IAAI;IACnH,IAAIa,iBAAiB,EAAE;MACrB;;IAGF7F,eAAe,CAACoE,WAAW,GAAG,IAAI;IAClCpE,eAAe,CAACqE,cAAc,GAAGT,GAAG,KAAKzC,SAAS;IAClDnB,eAAe,CAACkE,eAAe,GAAGN,GAAG;IACrC5D,eAAe,CAACsE,qBAAqB,GAAGtE,eAAe,CAACqE,cAAc,GAAG,KAAK,GAAGT,GAAG,KAAKzC,SAAS,KAC9FyC,GAAG,CAACoB,IAAI,KAAK,WAAW,IAAIpB,GAAG,CAACoB,IAAI,KAAK,YAAY,IAAIpB,GAAG,CAACoB,IAAI,KAAK,aAAa,CACtF;IAED,IAAMc,iBAAiB,GAAGlC,GAAG,KAAKzC,SAAS,IACvCzC,gBAAgB,CAACqH,MAAM,GAAG,CAAC,IAC3BrH,gBAAgB,CAACsH,IAAI,CACjB,UAACC,MAAM;MAAK,OAAAlH,KAAI,CAACD,OAAO,CAAC0C,mBAAmB,CAACyE,MAAM,CAAC;IAAxC,CAAwC,CAAC;IAC7D,IAAIH,iBAAiB,EAAE;MACrB;MACA,IAAI,CAACI,oBAAoB,EAAE;MAC3B;;IAGF,IAAItC,GAAG,KAAKzC,SAAS,EAAE;MACrBzC,gBAAgB,CAACyH,IAAI,CAACvC,GAAG,CAACqC,MAAM,CAAC;MACjC,IAAI,CAAClB,4BAA4B,CAACnB,GAAG,CAAC;;IAGxC5D,eAAe,CAACuE,oBAAoB,GAAG,IAAI,CAAC6B,sBAAsB,CAACxC,GAAG,CAAC;IACvE,IAAI5D,eAAe,CAACuE,oBAAoB,EAAE;MACxC,IAAI,CAAC8B,iBAAiB,EAAE;;IAG1BrD,qBAAqB,CAAC;MACpB;MACAtE,gBAAgB,GAAG,EAAE;MAErB,IAAI,CAACsB,eAAe,CAACuE,oBAAoB,IAClCX,GAAG,KAAKzC,SAAS,KACfyC,GAAqB,CAAC8B,GAAG,KAAK,GAAG,IAAK9B,GAAqB,CAAC0C,OAAO,KAAK,EAAE,CAAC,EAAE;QACpF;QACA;QACA;QACA;QACA;QACA;QACAtG,eAAe,CAACuE,oBAAoB,GAAGxF,KAAI,CAACqH,sBAAsB,CAACxC,GAAG,CAAC;QACvE,IAAI5D,eAAe,CAACuE,oBAAoB,EAAE;UACxCxF,KAAI,CAACsH,iBAAiB,EAAE;;;MAI5B,IAAI,CAACrG,eAAe,CAACuE,oBAAoB,EAAE;QACzC;QACAxF,KAAI,CAACiB,eAAe,GAAGjB,KAAI,CAACkB,sBAAsB,EAAE;;IAExD,CAAC,CAAC;EACJ,CAAC;EAEOtB,mBAAA,CAAA4D,SAAA,CAAA6D,sBAAsB,GAA9B,UAA+BxC,GAAW;IACxC,OAAQA,GAAG,KAAKzC,SAAS,IAAIyC,GAAG,CAACoB,IAAI,KAAK,SAAS,GAC/C,IAAI,CAAClG,OAAO,CAACiD,eAAe,EAAE,GAC9B,IAAI;EACV,CAAC;EAEOpD,mBAAA,CAAA4D,SAAA,CAAA8D,iBAAiB,GAAzB;IAAA,IAAAtH,KAAA;IACQ,IAAA4D,EAAA,GAAiDhE,mBAAmB,CAACL,OAAO;MAA3EiI,sBAAsB,GAAA5D,EAAA,CAAA4D,sBAAA;MAAEC,oBAAoB,GAAA7D,EAAA,CAAA6D,oBAA+B;IAC5E,IAAAC,EAAA,GAAmC9H,mBAAmB,CAACP,UAAU;MAAhEiF,eAAe,GAAAoD,EAAA,CAAApD,eAAA;MAAED,aAAa,GAAAqD,EAAA,CAAArD,aAAkC;IAChE,IAAAsD,uBAAuB,GAAI/H,mBAAmB,CAACN,OAAO,CAAAqI,uBAA/B;IAE9B,IAAI,CAACzD,cAAc,EAAE;IAErB,IAAI0D,cAAc,GAAG,EAAE;IACvB,IAAIC,YAAY,GAAG,EAAE;IAErB,IAAI,CAAC,IAAI,CAAC9H,OAAO,CAACmD,WAAW,EAAE,EAAE;MACzB,IAAA4E,EAAA,GAAyB,IAAI,CAACC,2BAA2B,EAAE;QAA1DC,UAAU,GAAAF,EAAA,CAAAE,UAAA;QAAEC,QAAQ,GAAAH,EAAA,CAAAG,QAAsC;MACjEL,cAAc,GAAMI,UAAU,CAAClF,CAAC,YAAOkF,UAAU,CAACjF,CAAC,OAAI;MACvD8E,YAAY,GAAMI,QAAQ,CAACnF,CAAC,YAAOmF,QAAQ,CAAClF,CAAC,OAAI;;IAGnD,IAAI,CAAChD,OAAO,CAACwD,iBAAiB,CAACiE,sBAAsB,EAAEI,cAAc,CAAC;IACtE,IAAI,CAAC7H,OAAO,CAACwD,iBAAiB,CAACkE,oBAAoB,EAAEI,YAAY,CAAC;IAClE;IACAzD,YAAY,CAAC,IAAI,CAAC/D,eAAe,CAAC;IAClC+D,YAAY,CAAC,IAAI,CAAC9D,0BAA0B,CAAC;IAC7C,IAAI,CAAC4H,0BAA0B,EAAE;IACjC,IAAI,CAACnI,OAAO,CAACuD,WAAW,CAACgB,eAAe,CAAC;IAEzC;IACA,IAAI,CAACvE,OAAO,CAACuC,mBAAmB,EAAE;IAClC,IAAI,CAACvC,OAAO,CAACoC,QAAQ,CAACkC,aAAa,CAAC;IACpC,IAAI,CAAChE,eAAe,GAAG8H,UAAU,CAAC;MAChCnI,KAAI,CAACmB,uBAAuB,EAAE;IAChC,CAAC,EAAEwG,uBAAuB,CAAC;EAC7B,CAAC;EAEO/H,mBAAA,CAAA4D,SAAA,CAAAuE,2BAA2B,GAAnC;IACQ,IAAAnE,EAAA,GAA2C,IAAI,CAAC3C,eAAe;MAA9DkE,eAAe,GAAAvB,EAAA,CAAAuB,eAAA;MAAEI,qBAAqB,GAAA3B,EAAA,CAAA2B,qBAAwB;IAErE,IAAIyC,UAAU;IACd,IAAIzC,qBAAqB,EAAE;MACzByC,UAAU,GAAGxI,wBAAwB,CACjC2F,eAAe,EACf,IAAI,CAACpF,OAAO,CAAC8C,mBAAmB,EAAE,EAClC,IAAI,CAAC9C,OAAO,CAACuC,mBAAmB,EAAE,CACrC;KACF,MAAM;MACL0F,UAAU,GAAG;QACXlF,CAAC,EAAE,IAAI,CAACtC,KAAK,CAACC,KAAK,GAAG,CAAC;QACvBsC,CAAC,EAAE,IAAI,CAACvC,KAAK,CAACE,MAAM,GAAG;OACxB;;IAEH;IACAsH,UAAU,GAAG;MACXlF,CAAC,EAAEkF,UAAU,CAAClF,CAAC,GAAI,IAAI,CAACnC,WAAW,GAAG,CAAE;MACxCoC,CAAC,EAAEiF,UAAU,CAACjF,CAAC,GAAI,IAAI,CAACpC,WAAW,GAAG;KACvC;IAED,IAAMsH,QAAQ,GAAG;MACfnF,CAAC,EAAG,IAAI,CAACtC,KAAK,CAACC,KAAK,GAAG,CAAC,GAAK,IAAI,CAACE,WAAW,GAAG,CAAE;MAClDoC,CAAC,EAAG,IAAI,CAACvC,KAAK,CAACE,MAAM,GAAG,CAAC,GAAK,IAAI,CAACC,WAAW,GAAG;KAClD;IAED,OAAO;MAACqH,UAAU,EAAAA,UAAA;MAAEC,QAAQ,EAAAA;IAAA,CAAC;EAC/B,CAAC;EAEOrI,mBAAA,CAAA4D,SAAA,CAAApC,6BAA6B,GAArC;IAAA,IAAApB,KAAA;IACE;IACA;IACO,IAAAsE,eAAe,GAAI1E,mBAAmB,CAACP,UAAU,CAAAiF,eAAlC;IAChB,IAAAV,EAAA,GAAsC,IAAI,CAAC3C,eAAe;MAAzDmE,oBAAoB,GAAAxB,EAAA,CAAAwB,oBAAA;MAAEC,WAAW,GAAAzB,EAAA,CAAAyB,WAAwB;IAChE,IAAM+C,kBAAkB,GAAGhD,oBAAoB,IAAI,CAACC,WAAW;IAE/D,IAAI+C,kBAAkB,IAAI,IAAI,CAAChI,2BAA2B,EAAE;MAC1D,IAAI,CAAC8H,0BAA0B,EAAE;MACjC,IAAI,CAACnI,OAAO,CAACoC,QAAQ,CAACmC,eAAe,CAAC;MACtC,IAAI,CAAChE,0BAA0B,GAAG6H,UAAU,CAAC;QAC3CnI,KAAI,CAACD,OAAO,CAACuD,WAAW,CAACgB,eAAe,CAAC;MAC3C,CAAC,EAAEhF,OAAO,CAAC+I,kBAAkB,CAAC;;EAElC,CAAC;EAEOzI,mBAAA,CAAA4D,SAAA,CAAA0E,0BAA0B,GAAlC;IACS,IAAA7D,aAAa,GAAIzE,mBAAmB,CAACP,UAAU,CAAAgF,aAAlC;IACpB,IAAI,CAACtE,OAAO,CAACuD,WAAW,CAACe,aAAa,CAAC;IACvC,IAAI,CAACjE,2BAA2B,GAAG,KAAK;IACxC,IAAI,CAACL,OAAO,CAACuC,mBAAmB,EAAE;EACpC,CAAC;EAEO1C,mBAAA,CAAA4D,SAAA,CAAA2D,oBAAoB,GAA5B;IAAA,IAAAnH,KAAA;IACE,IAAI,CAAC6G,uBAAuB,GAAG,IAAI,CAAC5F,eAAe,CAACkE,eAAe;IACnE,IAAI,CAAClE,eAAe,GAAG,IAAI,CAACC,sBAAsB,EAAE;IACpD;IACA;IACAiH,UAAU,CACN;MAAM,OAAAnI,KAAI,CAAC6G,uBAAuB,GAAGzE,SAAS;IAAxC,CAAwC,EAC9CxC,mBAAmB,CAACN,OAAO,CAACgJ,YAAY,CAAC;EAC/C,CAAC;EAEO1I,mBAAA,CAAA4D,SAAA,CAAA/B,cAAc,GAAtB;IAAA,IAAAzB,KAAA;IACE,IAAMiB,eAAe,GAAG,IAAI,CAACA,eAAe;IAC5C;IACA,IAAI,CAACA,eAAe,CAACoE,WAAW,EAAE;MAChC;;IAGF,IAAMkD,KAAK,GAAArI,QAAA,KAA4Be,eAAe,CAAC;IAEvD,IAAIA,eAAe,CAACqE,cAAc,EAAE;MAClCrB,qBAAqB,CAAC;QACpBjE,KAAI,CAACwI,mBAAmB,CAACD,KAAK,CAAC;MACjC,CAAC,CAAC;MACF,IAAI,CAACpB,oBAAoB,EAAE;KAC5B,MAAM;MACL,IAAI,CAACxC,8BAA8B,EAAE;MACrCV,qBAAqB,CAAC;QACpBjE,KAAI,CAACiB,eAAe,CAACmE,oBAAoB,GAAG,IAAI;QAChDpF,KAAI,CAACwI,mBAAmB,CAACD,KAAK,CAAC;QAC/BvI,KAAI,CAACmH,oBAAoB,EAAE;MAC7B,CAAC,CAAC;;EAEN,CAAC;EAEOvH,mBAAA,CAAA4D,SAAA,CAAAgF,mBAAmB,GAA3B,UAA4B5E,EACuB;QADtB2B,qBAAqB,GAAA3B,EAAA,CAAA2B,qBAAA;MAAEC,oBAAoB,GAAA5B,EAAA,CAAA4B,oBAAA;IAEtE,IAAID,qBAAqB,IAAIC,oBAAoB,EAAE;MACjD,IAAI,CAACpE,6BAA6B,EAAE;;EAExC,CAAC;EAEOxB,mBAAA,CAAA4D,SAAA,CAAAU,cAAc,GAAtB;IAAA,IAAAlE,KAAA;IACE,IAAI,CAACQ,KAAK,GAAG,IAAI,CAACT,OAAO,CAACuC,mBAAmB,EAAE;IAC/C,IAAMmG,MAAM,GAAGC,IAAI,CAACC,GAAG,CAAC,IAAI,CAACnI,KAAK,CAACE,MAAM,EAAE,IAAI,CAACF,KAAK,CAACC,KAAK,CAAC;IAE5D;IACA;IACA;IACA;IACA;IACA;IACA,IAAMmI,gBAAgB,GAAG,SAAAA,CAAA;MACvB,IAAMC,UAAU,GAAGH,IAAI,CAACI,IAAI,CACxBJ,IAAI,CAACK,GAAG,CAAC/I,KAAI,CAACQ,KAAK,CAACC,KAAK,EAAE,CAAC,CAAC,GAAGiI,IAAI,CAACK,GAAG,CAAC/I,KAAI,CAACQ,KAAK,CAACE,MAAM,EAAE,CAAC,CAAC,CAAC;MACnE,OAAOmI,UAAU,GAAGjJ,mBAAmB,CAACN,OAAO,CAAC0J,OAAO;IACzD,CAAC;IAED,IAAI,CAACnI,SAAS,GAAG,IAAI,CAACd,OAAO,CAACmD,WAAW,EAAE,GAAGuF,MAAM,GAAGG,gBAAgB,EAAE;IAEzE;IACA,IAAMjI,WAAW,GAAG+H,IAAI,CAACO,KAAK,CAACR,MAAM,GAAG7I,mBAAmB,CAACN,OAAO,CAAC4J,oBAAoB,CAAC;IACzF;IACA,IAAI,IAAI,CAACnJ,OAAO,CAACmD,WAAW,EAAE,IAAIvC,WAAW,GAAG,CAAC,KAAK,CAAC,EAAE;MACvD,IAAI,CAACA,WAAW,GAAGA,WAAW,GAAG,CAAC;KACnC,MAAM;MACL,IAAI,CAACA,WAAW,GAAGA,WAAW;;IAEhC,IAAI,CAACJ,OAAO,GAAG,KAAG,IAAI,CAACM,SAAS,GAAG,IAAI,CAACF,WAAa;IAErD,IAAI,CAACwI,mBAAmB,EAAE;EAC5B,CAAC;EAEOvJ,mBAAA,CAAA4D,SAAA,CAAA2F,mBAAmB,GAA3B;IACQ,IAAAvF,EAAA,GAEFhE,mBAAmB,CAACL,OAAO;MAD7B6J,WAAW,GAAAxF,EAAA,CAAAwF,WAAA;MAAEC,QAAQ,GAAAzF,EAAA,CAAAyF,QAAA;MAAEC,OAAO,GAAA1F,EAAA,CAAA0F,OAAA;MAAEC,YAAY,GAAA3F,EAAA,CAAA2F,YACf;IAE/B,IAAI,CAACxJ,OAAO,CAACwD,iBAAiB,CAAC6F,WAAW,EAAK,IAAI,CAACzI,WAAW,OAAI,CAAC;IACpE,IAAI,CAACZ,OAAO,CAACwD,iBAAiB,CAACgG,YAAY,EAAE,IAAI,CAAChJ,OAAO,CAAC;IAE1D,IAAI,IAAI,CAACR,OAAO,CAACmD,WAAW,EAAE,EAAE;MAC9B,IAAI,CAACpC,eAAe,GAAG;QACrBC,IAAI,EAAE2H,IAAI,CAACc,KAAK,CAAE,IAAI,CAAChJ,KAAK,CAACC,KAAK,GAAG,CAAC,GAAK,IAAI,CAACE,WAAW,GAAG,CAAE,CAAC;QACjEK,GAAG,EAAE0H,IAAI,CAACc,KAAK,CAAE,IAAI,CAAChJ,KAAK,CAACE,MAAM,GAAG,CAAC,GAAK,IAAI,CAACC,WAAW,GAAG,CAAE;OACjE;MAED,IAAI,CAACZ,OAAO,CAACwD,iBAAiB,CAC1B8F,QAAQ,EAAK,IAAI,CAACvI,eAAe,CAACC,IAAI,OAAI,CAAC;MAC/C,IAAI,CAAChB,OAAO,CAACwD,iBAAiB,CAAC+F,OAAO,EAAK,IAAI,CAACxI,eAAe,CAACE,GAAG,OAAI,CAAC;;EAE5E,CAAC;EACH,OAAApB,mBAAC;AAAD,CAAC,CAlfwCR,aAAa;;AAoftD;AACA,eAAeQ,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}